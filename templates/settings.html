{% extends "layout.html" %}
{% block title %}Einstellungen{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2>Einstellungen</h2>
    <p>Globale Konfiguration der Anwendung.</p>

    <form method="post">
        <div class="card mb-4">
            <div class="card-header"><h5>Ranglisten-Punkte</h5></div>
            <div class="card-body">
                <label for="ranking_points" class="form-label">Punktevergabe (kommasepariert, z.B. 10,8,6,4,2)</label>
                <input type="text" class="form-control" id="ranking_points" name="ranking_points" value="{{ settings.get('ranking_points', [])|join(', ') }}">
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header"><h5>Zeitplan-Berechnung</h5></div>
            <div class="card-body">
                <label for="time_per_starter" class="form-label">Gesch채tzte Zeit pro Starter in Sekunden (f체r Zeitplan-Vorschau)</label>
                <input type="number" class="form-control" id="time_per_starter" name="time_per_starter" value="{{ settings.get('time_per_starter', 90) }}">
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header"><h5>SCT-Faktoren (m/s) f체r Klasse 2/3</h5></div>
            <div class="card-body">
                {% set sct_factors = settings.get('sct_factors', {}) %}
                <div class="row">
                    <div class="col-md-6">
                        <h6>Jumping</h6>
                        {% for i in range(2, 4) %}
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Klasse {{ i }}</span>
                            <input type="number" step="0.1" name="sct_factor_Jumping_{{ i }}" class="form-control" value="{{ sct_factors.get('Jumping', {}).get(i|string, '') }}">
                        </div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        <h6>Agility</h6>
                        {% for i in range(2, 4) %}
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text">Klasse {{ i }}</span>
                            <input type="number" step="0.1" name="sct_factor_Agility_{{ i }}" class="form-control" value="{{ sct_factors.get('Agility', {}).get(i|string, '') }}">
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header"><h5>Vorlage f체r Startnummern-Schema</h5></div>
            <div class="card-body">
                {% set schema_template = settings.get('start_number_schema_template', {}) %}
                {% set possible_categories = ["Large", "Intermediate", "Medium", "Small"] %}
                {% set possible_classes = ["1", "2", "3", "Oldie"] %}
                <div class="row">
                    {% for cat in possible_categories %}
                    <div class="col-md-6 col-lg-3 mb-3">
                        <h6>{{ cat }}</h6>
                        {% for cls in possible_classes %}
                            {% set key = cat + '-' + cls %}
                            <div class="input-group input-group-sm mb-2">
                                <span class="input-group-text" style="width: 80px;">Klasse {{ cls }}</span>
                                <input type="number" name="schema_{{ key }}" class="form-control" value="{{ schema_template.get(key, '') }}">
                            </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary mt-4 w-100">Einstellungen speichern</button>
    </form>
</div>
{% endblock %}