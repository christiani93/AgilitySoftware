<div class="card h-100 shadow-sm">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0">{{ ring_name }}</h4>
    </div>
    {% if ring_data and ring_data.active_run %}
        <div class="card-body">
            <h5 class="card-title">{{ ring_data.active_run.name }}</h5>
            
            <div class="mb-3">
                <h6>Aktuell am Start:</h6>
                {% if ring_data.current_starter %}
                    <p class="fs-4"><strong>#{{ ring_data.current_starter.Startnummer }} - {{ ring_data.current_starter.Hundename }}</strong> / {{ ring_data.current_starter.Hundefuehrer }}</p>
                {% else %}
                    <p class="text-muted">Niemand</p>
                {% endif %}
            </div>

            <h6>Nächste 5 Starter:</h6>
            <ul class="list-group list-group-flush mb-3">
                {% for starter in ring_data.next_starters %}
                    <li class="list-group-item">#{{ starter.Startnummer }} - {{ starter.Hundename }}</li>
                {% else %}
                    <li class="list-group-item text-muted">Keine weiteren Starter in diesem Lauf.</li>
                {% endfor %}
            </ul>

            <h6>Letzte Resultate:</h6>
            <ul class="list-group list-group-flush">
                 {% for res in ring_data.last_results %}
                    <li class="list-group-item">#{{ res.Startnummer }} - {{ res.Hundename }}: {{ res.result.zeit }}s / {{ "%.2f"|format(res.fehler_total|float) }} Fehler</li>
                {% else %}
                    <li class="list-group-item text-muted">Noch keine Resultate.</li>
                {% endfor %}
            </ul>
        </div>
        <div class="card-footer">
            {# KORREKTUR: "Zur Erfassung"-Button entfernt #}
            <a href="{{ url_for('live_bp.show_ranking', event_id=event_id, run_id=ring_data.active_run.id) }}" class="btn btn-outline-primary btn-sm">Vollständige Rangliste</a>
        </div>
    {% else %}
        <div class="card-body text-center p-5">
            <p class="text-muted">Für diesen Ring ist kein Lauf als 'aktiv' für die Anzeige markiert.</p>
            <p><small>Gehe zur Resultaterfassung eines Laufes und klicke "Für Sprecher-Anzeige aktivieren".</small></p>
        </div>
    {% endif %}
</div>